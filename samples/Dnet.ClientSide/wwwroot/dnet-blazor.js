(()=>{var e={998:()=>{window.admindashboardinterop={get:e=>e in localStorage?JSON.parse(localStorage[e]):null,set:(e,t)=>{localStorage[e]=JSON.stringify(t)},delete:e=>{delete localStorage[e]},getElementScrollLeft:function(e){return null!=e?e.scrollLeft:0},getBoundingClientRect:function(e){return null!=e?e.getBoundingClientRect():null},getElementScrollWidth:function(e){return null!=e?e.scrollWidth:0},getElementSOffsets:function(e){return null==e?{offsetWidth:0,offsetHeight:0,offsetTop:0,offsetLeft:0}:{offsetWidth:e.offsetWidth,offsetHeight:e.offsetHeight,offsetTop:e.offsetTop,offsetLeft:e.offsetLeft}}}},619:()=>{window.blginterop=function(){const e={};let t,n=!1,o=!1,i=null;function r(e){return e?"visible"!==getComputedStyle(e).overflowY?e:r(e.parentElement):null}return{addTouchListeners:function(e,r,l){return function(e,r,l){let c,s,u,a;e.addEventListener("touchstart",(function(e){if(n)return;c=e.touches[0].clientX,s=e.touches[0].clientY,u=r.scrollLeft,a=r.scrollTop,n=!0,i=e.touches[0],o=!1;const t=i;window.setTimeout((()=>{n&&i===t&&!o&&(o=!0)}),500)}),{passive:!0}),e.addEventListener("touchmove",(function(e){if(!n)return;const t=function(e){for(let t=0;t<e.length;t++)if(e[t].identifier===i.identifier)return e[t];return null}(e.touches);if(!t)return;!function(e,t,n){const o=Math.abs(e.clientX-t.clientX),i=Math.abs(e.clientY-t.clientY);return Math.max(o,i)<=4}(t,i)&&(o=!0);const a=e.touches[0];console.log("startX",c),console.log("touch.clientX",a.clientX);const d=a.clientX-c,f=a.clientY-s;if(Math.abs(d)>Math.abs(f)){if(Math.abs(d)>10){e.preventDefault();var h=r.scrollWidth-r.clientWidth;console.log("deltaX",d),r.scrollLeft=u-d;var g=r.scrollLeft;if(console.log("elementScrollLeft",g),0===g&&d<0||g>=h&&d>0)return;var m={maxScrollLeft:h,deltaX:d,elementScrollLeft:g};l.invokeMethodAsync("OnTouchMove",m)}}else if(Math.abs(f)>10)return;Math.abs(d)>10&&Math.abs(f)}),{passive:!1}),e.addEventListener("touchend",(function(e){n&&(o||function(){const e=(new Date).getTime();t=t&&t>0&&e-t>500?null:e}(),n=!1)}),{passive:!0})}(e,r,l),!0},addWindowEventListeners:function(e,t){return e.addEventListener("mouseleave",(function(){t.invokeMethodAsync("MouseLeave")})),!0},getElementScrollLeft:function(e){return e.scrollLeft},getBoundingClientRect:function(e){return e.getBoundingClientRect()},getElementScrollWidth:function(e){return e.scrollWidth},getHeaderWidth:function(e){let t=document.getElementById(e).getElementsByClassName("blg-header-cell blg-header-cell-notpinned"),n=0;for(var o=0;o<t.length;o++)n+=t[o].clientWidth;return n},init:function(t,n,o,i=50){const l=r(n);(l||document.documentElement).style.overflowAnchor="none";const c=new window.IntersectionObserver((function(e){e.forEach((e=>{if(!e.isIntersecting)return;const i=n.getBoundingClientRect(),r=o.getBoundingClientRect().top-i.bottom,l=e.rootBounds.height;e.target===n?t.invokeMethodAsync("OnSpacerBeforeVisible",e.intersectionRect.top-e.boundingClientRect.top,r,l):e.target===o&&o.offsetHeight>0&&t.invokeMethodAsync("OnSpacerAfterVisible",e.boundingClientRect.bottom-e.intersectionRect.bottom,r,l)}))}),{root:l,rootMargin:`${i}px`,threshold:0});c.observe(n),c.observe(o);const s=a(n),u=a(o);function a(e){const t=new window.MutationObserver((()=>{c.unobserve(e),c.observe(e)}));return t.observe(e,{attributes:!0}),t}e[t._id]={intersectionObserver:c,mutationObserverBefore:s,mutationObserverAfter:u}},dispose:function(t){const n=e[t._id];n&&(n.intersectionObserver.disconnect(),n.mutationObserverBefore.disconnect(),n.mutationObserverAfter.disconnect(),t.dispose(),delete e[t._id])}}}()},918:()=>{window.dnetimageeditor=function(){var e=window.rxjs,t=0,n=0,o=0,i=0;function r(e,r,l,c,s,u,a,d,f){let h,g,m,p;switch(e){case"TopLeft":h=o+(s-l),g=i+(s-l),m=n-(s-l),p=t-(s-l);break;case"TopRight":h=o+(s-l),g=i+(s-l),m=n-(s-l),p=t;break;case"BottomLeft":h=o+(c-r),g=i+(c-r),m=n,p=t-(c-r);break;case"BottomRight":h=o-(s-l),g=i-(s-l),m=n,p=t;break;case"TopCenter":h=o+(s-l),g=i,m=n-(s-l),p=t;break;case"BottomCenter":h=o-(s-l),g=i,m=n,p=t;break;case"RightCenter":h=o,g=i-(c-r),m=n,p=t;break;case"LeftCenter":h=o,g=i+(c-r),m=n,p=t-(c-r)}return g=Math.max(g,d),h=Math.max(h,f),p=Math.max(0,p),m=Math.max(0,m),p+g>u&&(g=u-p),m+h>a&&(h=a-m),{height:h,width:g,top:m,left:p}}return{setFocus:function(e){e&&e.focus()},getBoundingClientRect:function(e){return e.getBoundingClientRect()},initializeDragAndDrop:function(e,r,l,c,s,u){!function(e,r,l,c,s){t=c,n=s,i=r.offsetWidth,o=r.offsetHeight;const u=l.offsetWidth,a=l.offsetHeight,d=6;let f=0,h=0,g=0,m=0,p=!1,w=null,v=t,b=n;const M=r.nextElementSibling&&r.nextElementSibling.classList&&r.nextElementSibling.classList.contains("dnet-crop-box-dummy")?r.nextElementSibling:null;function E(t,n){const l=Math.min(Math.max(t,d),u-i-d),c=Math.min(Math.max(n,0),a-o);v=l,b=c,r.style.left=l+"px",r.style.top=c+"px",M&&(M.style.left=l+"px",M.style.top=c+"px"),e.invokeMethodAsync("OnDrag",{height:o,width:i,left:l,top:c})}function L(e){if(!p)return;const t=g+(e.clientX-f),n=m+(e.clientY-h);null==w&&(w=window.requestAnimationFrame((function(){w=null,E(t,n)})))}function S(r){p&&(p=!1,document.removeEventListener("mousemove",L),document.removeEventListener("mouseup",S),t=v,n=b,e.invokeMethodAsync("OnDragEnd",{height:o,width:i,left:t,top:n}))}E(t,n),r.addEventListener("mousedown",(function(o){o.preventDefault(),p=!0,f=o.clientX,h=o.clientY,g=t,m=n,e.invokeMethodAsync("OnDragStart"),document.addEventListener("mousemove",L),document.addEventListener("mouseup",S)}))}(e,r,l,c,s)},initializeResize:function(l,c,s,u,a,d,f,h,g,m,p){!function(l,c,s,u,a,d,f,h,g,m,p){t=s,n=u,o=a,i=d;for(let s of c){const c=e.fromEvent(s.reference,"mousedown"),u=e.fromEvent(document.body,"mousemove"),a=e.fromEvent(document.body,"mouseup").pipe(e.operators.take(1));c.pipe(e.operators.switchMap((c=>{const d=c.clientX,g=c.clientY;return this._resizeEndSub=a.subscribe((e=>{var c=r(s.resizerType,e.clientX,e.clientY,d,g,f,h,m,p);t=c.left,n=c.top,o=c.height,i=c.width,l.invokeMethodAsync("OnResizeEnd",{height:o,width:i,left:t,top:n})})),c.preventDefault(),l.invokeMethodAsync("OnResizeStart"),u.pipe(e.operators.map((e=>(e.preventDefault(),r(s.resizerType,e.clientX,e.clientY,d,g,f,h,m,p)))),e.operators.takeUntil(a))}))).pipe(e.operators.filter((e=>e.top+e.height<=h&&e.left+e.width<=f&&e.height>p&&e.top>=0&&e.left>=0))).subscribe((e=>{l.invokeMethodAsync("OnResize",e)}))}}(l,c,s,u,a,d,f,h,0,m,p)},cropWithPhoton:async function(e,t,n,o,i,r,l){if(!e)throw new Error("Image element is required");const c=await window.photonInit.get();var s=document.createElement("canvas"),u=s.getContext("2d");s.width=e.naturalWidth||e.width,s.height=e.naturalHeight||e.height,u.drawImage(e,0,0);const a=Math.max(0,Math.min(Math.round(t),s.width-1)),d=Math.max(0,Math.min(Math.round(n),s.height-1)),f=a+Math.max(1,Math.min(Math.round(o),s.width-a)),h=d+Math.max(1,Math.min(Math.round(i),s.height-d));let g=c.open_image(s,u),m=c.crop(g,a,d,f,h),p=m;if(r&&l){const e=Math.max(1,Math.min(Math.round(r),8192)),t=Math.max(1,Math.min(Math.round(l),8192)),n=e*t*4,o=2147483647;if(n>o)throw new Error(`Resize dimensions too large: ${e}x${t} would create ${n} byte buffer (max: ${o})`);p=c.resize(m,e,t,5)}var w=document.createElement("canvas");w.width=p.get_width(),w.height=p.get_height();var v=w.getContext("2d");return c.putImageData(w,v,p),w.toDataURL("image/jpeg",.95)}}}()},27:()=>{let e=null,t=null;async function n(){return e||t||(t=(async()=>{try{const t=document.baseURI||window.location.origin+"/",n=new URL("photon_rs.js",t).href;console.log("ðŸ”„ Loading Photon WASM from:",n);const o=await import(n),i=new URL("photon_rs_bg.wasm",t).href;return await o.default(i),e=o,console.log("âœ… Photon WASM initialized successfully"),o}catch(e){throw console.error("âŒ Failed to initialize Photon WASM:",e),t=null,e}})(),t)}window.photonInit={init:n,get:async function(){return e||await n(),e},isReady:function(){return null!==e}}},85:()=>{var e;window.dnetoverlay=(e=new Map,{addWindowEventListeners:function(t){var n=window.rxjs,o=n.merge(n.fromEvent(window,"resize"),n.fromEvent(window,"orientationchange")).pipe(n.operators.auditTime(100)).subscribe((e=>{t.invokeMethodAsync("OnWindowResized",{Width:window.innerWidth,Height:window.innerHeight})}));return e.set(t,o),!0},removeWindowEventListeners:function(t){var n=e.get(t);n&&(n.unsubscribe(),e.delete(t))},getViewportScrollPosition:function(){var e=document.documentElement,t=e.getBoundingClientRect();return{Top:-t.top||document.body.scrollTop||window.scrollY||e.scrollTop||0,Left:-t.left||document.body.scrollLeft||window.scrollX||e.scrollLeft||0}},getViewportSize:function(){return{Width:window.innerWidth,Height:window.innerHeight}},getViewportSizeNoScroll:function(){return{Width:document.documentElement.clientWidth,Height:document.documentElement.clientHeight}},getBoundingClientRect:function(e){return e.getBoundingClientRect()},getDocumentBoundingClientRect:function(){return document.documentElement.getBoundingClientRect()},getDocumentClientHeight:function(){return document.documentElement.clientHeight},getDocumentClientWidth:function(){return document.documentElement.clientWidth},getWindowWidth:function(){return window.innerWidth},getContainerWidth:function(e){const t=document.getElementById(e);return t?t.offsetWidth:0}})},871:()=>{window.dnetinterop={get:e=>e in localStorage?JSON.parse(localStorage[e]):null,set:(e,t)=>{localStorage[e]=JSON.stringify(t)},delete:e=>{delete localStorage[e]},getElementScrollLeft:function(e){return null!=e?e.scrollLeft:0},getBoundingClientRect:function(e){return null!=e?e.getBoundingClientRect():null},getElementScrollWidth:function(e){return null!=e?e.scrollWidth:0},getElementSOffsets:function(e){return null==e?{offsetWidth:0,offsetHeight:0,offsetTop:0,offsetLeft:0}:{offsetWidth:e.offsetWidth,offsetHeight:e.offsetHeight,offsetTop:e.offsetTop,offsetLeft:e.offsetLeft}}}}},t={};function n(o){var i=t[o];if(void 0!==i)return i.exports;var r=t[o]={exports:{}};return e[o](r,r.exports,n),r.exports}n(619),n(27),n(918),n(998),n(85),n(871)})();